# 设计文档：多次订单专用验证页面

## 架构设计

### 1. 页面结构
基于现有 `public/index.html` 创建 `public/multi-order.html`，保持：
- 完全相同的UI布局和样式
- 相同的教程内容展示
- 相同的交互功能（复制账号密码等）
- 相同的会话管理机制

### 2. 验证逻辑修改
需要修改前端的验证处理逻辑：

**原验证流程**：
```
用户输入订单号 → 后端验证API → 检查单次+多次订单 → 允许/拒绝访问
```

**新验证流程**：
```
用户输入订单号 → 后端验证API → 仅检查多次订单 → 允许/拒绝访问
```

### 3. 实现方案

#### 方案A：前端过滤（推荐）
- 修改 `public/js/api.js` 中验证逻辑
- 在验证API调用后检查 `orderInfo.type === 'multi'`
- 如果不是多次订单，显示友好的错误消息

#### 方案B：创建专用API端点
- 新增 `/api/verify/multi-only` 端点
- 后端直接只查询 `multi_orders` 表
- 前端调用专用端点

**选择方案A**：因为现有API已经提供了订单类型信息，无需创建新端点。

### 4. 错误处理策略
当订单不是多次订单时，显示统一错误消息：
- "此页面仅支持多次订单验证，请联系客服获取多次订单权限"
- 保持与现有系统相同的安全策略（不透露具体订单状态）

### 5. 兼容性考虑
- 保持与现有会话系统的兼容性
- 保持设备绑定机制不变
- 保持样式和资源加载方式一致

## 安全考虑
1. **信息泄露防护**：错误消息不透露订单是否存在于单次订单表中
2. **会话安全**：复用现有的会话管理机制
3. **设备绑定**：保持现有的设备验证逻辑
4. **速率限制**：继续使用现有的API速率限制

## 用户体验
1. **一致性**：页面外观和交互与原页面完全一致
2. **清晰性**：通过页面标题或提示告知用户这是多次订单专用页面
3. **友好性**：提供清晰的错误指引，引导用户联系客服