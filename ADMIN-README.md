# 订单管理系统使用指南

## 概述
订单管理系统是一个基于Web的管理界面，用于管理订单访问系统的多次订单。系统提供订单添加、搜索、编辑和删除功能。

## 访问地址
- 管理界面: `http://localhost:3000/admin`
- 登录页面: `http://localhost:3000/admin/login`

## 配置

### 环境变量
在 `.env` 文件中配置以下变量：

```bash
# 管理员密码（生产环境请修改）
ADMIN_PASSWORD=your-secure-password
```

### 默认密码
- 开发环境默认密码: `admin123`
- **重要**: 生产环境中必须修改默认密码

## 功能特性

### 1. 身份验证
- 基于密码的管理员登录
- 会话管理（2小时自动过期）
- 安全登出功能

### 2. 订单添加
#### 单个添加
- 输入订单号
- 可选设置最大访问次数
- 实时验证和反馈

#### 批量添加
- 支持文本区域批量输入
- 格式：每行一个订单号
- 可选格式：`订单号,最大访问次数`
- 批量操作结果统计

### 3. 订单列表
- 分页显示所有订单
- 显示订单信息：
  - 订单号
  - 创建时间
  - 最大访问次数
  - 已使用次数
  - 剩余访问次数
- 操作按钮：详情、编辑、删除

### 4. 订单搜索
- 按订单号关键词搜索
- 分页显示搜索结果
- 与订单列表相同的操作功能

### 5. 订单详情
- 完整的订单信息
- 使用历史记录
- IP地址和访问时间
- User-Agent信息

### 6. 订单编辑
- 修改最大访问次数
- 设置为无限制
- 实时保存验证

### 7. 订单删除
- 安全确认机制
- 同时删除使用记录
- 不可恢复操作

## 使用流程

### 首次使用
1. 启动服务器: `npm start`
2. 访问: `http://localhost:3000/admin`
3. 使用默认密码登录
4. 修改管理员密码（生产环境）

### 日常管理
1. 添加新订单（单个或批量）
2. 查看订单列表和使用情况
3. 搜索特定订单
4. 编辑订单设置
5. 删除不需要的订单

## 安全注意事项

1. **密码安全**
   - 生产环境必须修改默认密码
   - 使用强密码
   - 定期更换密码

2. **会话管理**
   - 会话2小时自动过期
   - 使用完毕后及时登出
   - 不要在公共设备保存登录状态

3. **数据保护**
   - 定期备份订单数据库
   - 谨慎使用删除功能
   - 监控订单使用情况

## 故障排除

### 无法登录
- 检查密码是否正确
- 确认服务器正常运行
- 查看服务器日志

### 页面加载失败
- 检查服务器是否启动
- 确认端口配置正确
- 检查防火墙设置

### 功能无法使用
- 检查网络连接
- 查看浏览器控制台错误
- 确认API服务正常

## API接口

管理员界面使用以下API接口：

- `POST /api/admin/login` - 管理员登录
- `POST /api/admin/logout` - 管理员登出
- `GET /api/admin/status` - 会话状态
- `POST /api/admin/orders/add` - 添加订单
- `POST /api/admin/orders/batch-add` - 批量添加
- `GET /api/admin/orders/search` - 搜索订单
- `GET /api/admin/orders/:orderNumber/details` - 订单详情
- `PUT /api/admin/orders/:orderNumber` - 编辑订单
- `DELETE /api/admin/orders/:orderNumber` - 删除订单

## 技术支持

如遇到技术问题，请：
1. 查看服务器日志
2. 检查浏览器控制台
3. 确认配置文件正确
4. 联系技术支持